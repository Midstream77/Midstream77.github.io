<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>快排，归并</title>
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/prism.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/nav.css">
    <link rel="stylesheet" href="/css/blogs.css">
</head>

<body>
    <script src="/js/prism.js"></script>
    <!-- wrapper -->
    <div class="wrapper">
        <!-- header -->
        <div class="nheader">
            <h2 class="ntitle">Midstreamblog</h2>
            <h1 class="ntitle">快排，归并</h1>
            <h3 class="ntitle">2021/05/25</h3>
        </div>
        <div class="divider"></div>
    </div>
    <div class="divider"></div>
    <div class="wrapper">
        <div class="divider"></div>
        <article>
            &ensp;
        </article>
        <pre>
            <code class="language-C++">
//写了无数遍快排，但是从来没有写过随机化快排

#include &lt;iostream>
#include &lt;cstdlib>
#include &lt;time.h>
using namespace std;

void swap(int &a, int &b){
    int t = a;
    a = b;
    b = t;
}

int random(int left, int right){
    srand(time(NULL));
    int r = (rand()%(right-left+1))+left;
    return r;
}

void _qiuck_sort(int* arr, int left, int right){
    if(left>right) return;
    int i=left, j=right, pivot=arr[i];
    while(i&lt;j){
        while(arr[j]>=pivot&&i&lt;j) j--;
        while(arr[i]&lt;=pivot&&i&lt;j) i++;
        if(i&lt;j) swap(arr[i],arr[j]);
    }
    swap(arr[left],arr[i]);
    _qiuck_sort(arr,left,i-1);
    _qiuck_sort(arr,i+1,right);
}

//随机化快排，用于规避在有序数组中快排每次取pivot都是极值的情况
//唯一的改动就是随机取pivot
void _random_qiuck_sort(int* arr, int left, int right){
    if(left>right) return;
    int i=left, j=right, pivot;
    int r = random(left,right);
    pivot = arr[r];
    swap(arr[left],arr[r]);
    while(i&lt;j){
        while(arr[j]>=pivot&&i&lt;j) j--;
        while(arr[i]&lt;=pivot&&i&lt;j) i++;
        if(i&lt;j) swap(arr[i],arr[j]);
    }
    swap(arr[left],arr[i]);
    _random_qiuck_sort(arr,left,i-1);
    _random_qiuck_sort(arr,i+1,right);
}

void qiuck_sort(int* arr, int n){
    _qiuck_sort(arr,0,n-1);
    //_random_qiuck_sort(arr,0,n-1);
}

int main(){
    int n;
    scanf("%d",&n);
    int *arr = new int[n];
    for(int i=0;i&lt;n;i++) cin>>arr[i];
    for(int i=0;i&lt;n;i++) cout&lt;&lt;arr[i]&lt;&lt;"\t";
    cout&lt;&lt;"\n";
    qiuck_sort(arr,n);
    for(int i=0;i&lt;n;i++) cout&lt;&lt;arr[i]&lt;&lt;"\t";
}
            </code>
        </pre>
        <article>
            &ensp;
        </article>
        <pre>
            <code class="language-C++">
//归并排序，老早就学过但是从来没写过（好像用python写过）

#include &lt;iostream>
using namespace std;

void _merge(int* arr, int left, int mid, int right){
    if(left>mid||mid>right) return;

    int i=left, j=mid+1, m=0;
    int* tmp = new int[right-left+1];

    while(i&lt;=mid&&j&lt;=right){
        if(arr[i]&lt;arr[j]) tmp[m++]=arr[i++];
        else tmp[m++]=arr[j++];
    }
    while(i&lt;=mid) tmp[m++]=arr[i++];
    while(j&lt;=right) tmp[m++]=arr[j++];
    for(i=0;i&lt;=right-left;i++) arr[left+i] = tmp[i];

    delete []tmp;
}

void _merge_sort(int* arr, int left, int right){
    if(left>=right) return;
    int mid = (left+right)/2;
    _merge_sort(arr,left,mid);
    _merge_sort(arr,mid+1,right);
    _merge(arr,left, mid, right);
}

void merge_sort(int* arr, int n){
    _merge_sort(arr,0,n-1);
}

int main(){
    int n;
    scanf("%d",&n);
    int *arr = new int[n];
    for(int i=0;i&lt;n;i++) cin>>arr[i];
    for(int i=0;i&lt;n;i++) cout&lt;&lt;arr[i]&lt;&lt;"\t";
    cout&lt;&lt;"\n";
    merge_sort(arr,n);
    for(int i=0;i&lt;n;i++) cout&lt;&lt;arr[i]&lt;&lt;"\t";
}
            </code>
        </pre>
    </div>
    <div class="divider"></div>
    <div class="divider"></div>
    <div class="divider"></div>
    <div class="divider"></div>
    <div class="divider"></div>
</body>
<div class="sidebar">
    <a href="/index.html"><img class="home" src="/img/logo/home.png" alt="home"></a>
    <a href="/nav/studynotes.html"><img class="back" src="/img/logo/back.png" alt="back"></a>
    <a href="#"><img class="back-top" src="/img/logo/top.png" alt="back to top"></a>
</div>

</html>